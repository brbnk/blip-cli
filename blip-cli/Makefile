APP_NAME=blip
TARGET_DIR=target/release
BIN_PATH=$(TARGET_DIR)/$(APP_NAME)
RENAMED_BIN=$(TARGET_DIR)/$(APP_NAME)
INSTALL_PATH=/usr/bin/$(APP_NAME)

.PHONY: all build install rust

all: rust build install

rust:
	@echo "ðŸ”§ Verificando se o Rust estÃ¡ instalado..."
	@if ! command -v rustc >/dev/null 2>&1; then \
		echo "ðŸ”§ Rust nÃ£o encontrado. Instalando..."; \
		curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y; \
		source $$HOME/.cargo/env; \
	else \
		echo "âœ… Rust jÃ¡ estÃ¡ instalado."; \
	fi

build:
	@echo "ðŸš€ Compilando o projeto..."
	cargo build --release

install: 
	@echo "ðŸ“¦ Instalando em $(INSTALL_PATH)..."
	sudo cp $(RENAMED_BIN) $(INSTALL_PATH)
	@echo "âœ… InstalaÃ§Ã£o concluÃ­da: $(INSTALL_PATH)"
